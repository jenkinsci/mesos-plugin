<j:jelly xmlns:j="jelly:core" xmlns:st="jelly:stapler" xmlns:d="jelly:define" xmlns:l="/lib/layout" xmlns:t="/lib/hudson" xmlns:f="/lib/form">
    <f:entry title="Mesos native library path" field="nativeLibraryPath">
        <f:textbox field="nativeLibraryPath" clazz="required"/>
    </f:entry>

    <f:entry title="${%Mesos Master [hostname:port]}" field="master">
        <f:textbox field="master" clazz="required"/>
    </f:entry>

    <f:entry title="${%Description}">
        <f:textbox field="description" />
    </f:entry>

    <f:entry title="${%Framework Name}">
        <f:textbox field="frameworkName" default="Jenkins Scheduler" clazz="required"/>
    </f:entry>

    <f:entry title="${%Slave username}">
        <f:textbox field="slavesUser" default=""/>
    </f:entry>

    <f:entry title="${%Framework Principal}" field="principal">
      <f:textbox field="principal" default="jenkins" />
    </f:entry>

    <f:entry title="${%Framework Secret}" field="secret" description="${%Specify secret to enable framework authentication}">
      <f:textbox field="secret"/>
    </f:entry>

    <f:advanced>
        <f:entry title="${%Checkpointing}" description="${%Enable Mesos framework checkpointing?}">
            <f:radio name="checkpoint" value="true" checked="${instance.checkpoint == true}" id="checkpoint.true"/>
            <st:nbsp/>${%Yes}
            <f:radio name="checkpoint" value="false" checked="${instance.checkpoint == false}" id="checkpoint.false"/>
            <st:nbsp/>${%No}
        </f:entry>

        <f:entry title="${%On-demand framework registration}" description="${%Enable to make this cloud register as a framework when builds need to be performed. And, disconnect otherwise.}">
            <f:radio name="onDemandRegistration" value="true" checked="${instance.onDemandRegistration == true}" id="onDemandRegistration.true"/>
                <st:nbsp/>${%Yes}
                    <f:radio name="onDemandRegistration" value="false" checked="${instance.onDemandRegistration == false}" id="onDemandRegistration.false"/>
                <st:nbsp/>${%No}
        </f:entry>
        <f:entry>
            <f:repeatable add="${%Add Slave Info}" var="slaveInfo" name="slaveInfos" items="${instance.slaveInfos}" noAddButton="false" minimum="1" >
                <table width="100%">
                    <f:entry title="${%Label String}">
                        <f:textbox field="labelString" default="mesos" value="${slaveInfo.labelString}" />
                    </f:entry>
                    <f:entry title="${%Jenkins Slave CPUs}">
                        <f:textbox field="slaveCpus" clazz="required" default="0.1" value="${slaveInfo.slaveCpus}" />
                    </f:entry>

                    <f:entry title="${%Jenkins Slave Memory in MB}">
                        <f:number field="slaveMem" clazz="required positive-number" default="512" value="${slaveInfo.slaveMem}"/>
                    </f:entry>

                    <f:entry title="${% Maximum number of Executors per Slave}">
                        <f:number field="maxExecutors" clazz="required number" default="2" value="${slaveInfo.maxExecutors}"/>
                    </f:entry>

                    <f:entry title="${%Jenkins Executor CPUs}">
                        <f:textbox field="executorCpus" clazz="required" default="0.1" value="${slaveInfo.executorCpus}"/>
                    </f:entry>

                    <f:entry title="${%Jenkins Executor Memory in MB}">
                        <f:number field="executorMem" clazz="required positive-number" default="128" value="${slaveInfo.executorMem}"/>
                    </f:entry>

                    <!--
                        Below option enables the user to specify the JENKINS_HOME directory of the slave. Defaults to "jenkins" if empty.
                    -->
                    <f:entry title="${%Remote FS Root}" field="remoteFSRoot">
                        <f:textbox field="remoteFSRoot" clazz="required" default="jenkins" value="${slaveInfo.remoteFSRoot}"/>
                    </f:entry>

                    <f:entry title="${%Idle Termination Minutes}">
                        <f:number field="idleTerminationMinutes" clazz="required positive-number" default="3" value="${slaveInfo.idleTerminationMinutes}"/>
                    </f:entry>
                    <f:entry title="${%Mesos Offer Selection Attributes}">
                        <f:textbox field="slaveAttributes" value="${slaveInfo.slaveAttributes}"/>
                    </f:entry>
                    <f:entry title="${%Additional Jenkins Slave JVM arguments}" field="jvmArgs">
                        <f:textbox field="jvmArgs" default="-Xms16m -XX:+UseConcMarkSweepGC -Djava.net.preferIPv4Stack=true" value="${slaveInfo.jvmArgs}"/>
                    </f:entry>

                    <f:entry title="${%Additional Jenkins Slave Agent JNLP arguments}" field="jnlpArgs">
                        <f:textbox field="jnlpArgs" default="" value="${slaveInfo.jnlpArgs}"/>
                    </f:entry>

                    <f:advanced>
                        <f:optionalBlock title="${%Use Docker Containerizer}" name="containerInfo" checked="${slaveInfo.containerInfo != null}">

                            <f:entry title="${%Container Type}" field="type">
                                <f:radioBlock name="type" title="${%Docker}" value="DOCKER" inline="true" checked="true">
                                    <f:entry title="${%Docker Image}" field="dockerImage" description="If using Docker, specify the docker image.">
                                        <f:textbox field="dockerImage" clazz="required" value="${slaveInfo.containerInfo.dockerImage}" default=""/>
                                    </f:entry>
                                </f:radioBlock>
                            </f:entry>

                            <f:entry title="${%Volumes}">
                                <f:repeatable add="${%Add Volume}" var="volume" name="volumes" items="${slaveInfo.containerInfo.volumes}" noAddButton="false" minimum="0">
                                    <fieldset>
                                        <table width="100%">
                                            <f:entry title="${%Container Path}">
                                                <f:textbox field="containerPath" clazz="required" default="" value="${volume.containerPath}" />
                                            </f:entry>

                                            <f:entry title="${%Host Path}">
                                                <f:textbox field="hostPath" default="" value="${volume.hostPath}" />
                                            </f:entry>

                                            <f:entry title="${%Read-Only}">
                                                <f:checkbox field="readOnly" default="false" value="${volume.readOnly}" />
                                            </f:entry>

                                            <f:entry>
                                                <div align="right" class="repeatable-delete show-if-only" style="margin-left: 1em;">
                                                    <f:repeatableDeleteButton value="${%Delete Volume}" /><br/>
                                                </div>
                                            </f:entry>

                                        </table>
                                    </fieldset>
                                </f:repeatable>
                            </f:entry>
                        </f:optionalBlock>

                        <f:optionalBlock title="${%Use External Containerizer}" name="externalContainerInfo" checked="${slaveInfo.externalContainerInfo != null}">
                            <f:entry title="${%External Container image}" field="image" description="Docker image requires prefix docker:///">
                                <f:textbox field="image" value="${externalContainerInfo.image}" default=""/>
                            </f:entry>

                            <f:entry title="${%External Container options}" field="options" description="Comma separated list of options to pass to the containerizer">
                                <f:textbox field="options" value="${externalContainerInfo.options}" default=""/>
                            </f:entry>
                        </f:optionalBlock>

                        <f:entry title="${%Additional URIs}" field="additionalURIs">
                            <f:repeatable add="${%Add URI}" var="uri" name="additionalURIs" items="${slaveInfo.additionalURIs}" noAddButton="false" minimum="0">
                                <fieldset>
                                    <table width="100%">
                                        <f:entry title="${%URI}">
                                            <f:textbox field="value" clazz="required" default="" value="${uri.value}" />
                                        </f:entry>

                                        <f:entry title="${%URI file should be executable}">
                                            <f:checkbox field="executable" default="false" value="${uri.executable}" />
                                        </f:entry>

                                        <f:entry title="${%Extract the URI}">
                                            <f:checkbox field="extract" default="true" value="${uri.extract}" />
                                        </f:entry>

                                        <f:entry>
                                            <div align="right" class="repeatable-delete show-if-only" style="margin-left: 1em;">
                                                <f:repeatableDeleteButton value="${%Delete URI}" /><br/>
                                            </div>
                                        </f:entry>

                                    </table>
                                </fieldset>
                            </f:repeatable>
                        </f:entry>
                    </f:advanced>

                    <f:entry>
                        <div align="right" class="repeatable-delete show-if-only" style="margin-left: 1em;">
                          <f:repeatableDeleteButton value="${%Delete Slave Info}" /><br/>
                        </div>
                    </f:entry>
                </table>
             </f:repeatable>
       </f:entry>
    </f:advanced>

    <f:validateButton title="${%Test Connection}" progress="${%Testing...}" method="testConnection" with="master,nativeLibraryPath"/>
</j:jelly>
